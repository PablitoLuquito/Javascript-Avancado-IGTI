<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
      .invalid {
        border-color: red;
      }
      .valid {
        border-color: greenyellow;
      }
      .msgvalid {
        color: green;
      }
      .msginvalid {
        color: red;
      }
    </style>
    <title>Aula 1.5 - FocusEvent - Evento de Focus</title>
  </head>
  <body>
    <label>Email: </label><input type="email" id="email" />
    <p id="msg"></p>

    <script>
      let email = document.getElementById("email");

      email.addEventListener("blur", funcBlur);
      email.addEventListener("blur", correctEmail);
      email.addEventListener("focus", funcFocus);

      function funcBlur(evt) {
        if (!evt.target.value.includes("@")) {
          evt.target.classList.add("invalid");
          document.getElementById("msg").classList.add("msginvalid");
          document.getElementById("msg").innerHTML =
            "Email invalido. Entre com um email correto.";
        }
      }

      function funcFocus(evt) {
        if (evt.target.classList.contains("invalid")) {
          evt.target.classList.remove("invalid");
          document.getElementById("msg").innerHTML = "";
        }
      }

      function correctEmail(evt) {
        if (evt.target.value.includes("@")) {
          evt.target.classList.add("valid");
          document.getElementById("msg").classList.add("msgvalid");
          document.getElementById("msg").innerHTML = "Email valido!";
        }
      }
    </script>
  </body>
</html>
